(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{68:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"dockerfile-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-指令"}},[s._v("#")]),s._v(" DockerFile 指令")]),s._v(" "),a("p",[s._v("参考"),a("a",{attrs:{href:"https://docs.docker.com/engine/reference/builder/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"from-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from-指令"}},[s._v("#")]),s._v(" FROM 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("platform=<platform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" <image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("AS <name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("指定后续指令基于哪个镜像，所以一个有效的DockerFile必须以FROM指令(前面可以加ARG指令定义变量)开头。")]),s._v(" "),a("h3",{attrs:{id:"platform-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#platform-参数"}},[s._v("#")]),s._v(" platform 参数")]),s._v(" "),a("p",[s._v("用于指定镜像的平台。例如linux / amd64，linux / arm64或Windows / amd64。默认情况下，使用构建请求的目标平台。")]),s._v(" "),a("h3",{attrs:{id:"image-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#image-参数"}},[s._v("#")]),s._v(" image 参数")]),s._v(" "),a("p",[s._v("镜像名称，可以加:version，来指定版本。")]),s._v(" "),a("h3",{attrs:{id:"as-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#as-参数"}},[s._v("#")]),s._v(" AS 参数")]),s._v(" "),a("p",[s._v("对FROM进行命名，后续镜像可以使用这个名称来引用这个构建完成的镜像。")]),s._v(" "),a("h2",{attrs:{id:"run-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-指令"}},[s._v("#")]),s._v(" RUN 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" <command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"executable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("基于镜像执行命令。行尾可以使用''换行。\n例如：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" /bin/bash "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source $HOME/.bashrc; \\\necho $HOME'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("等效于：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" /bin/bash "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("c "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'source $HOME/.bashrc; echo $HOME'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"cmd-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmd-指令"}},[s._v("#")]),s._v(" CMD 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"executable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" (exec form"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" this is the preferred form)\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" (as default parameters to ENTRYPOINT)\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" command param1 param2 (shell form)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",[a("li",[s._v("执行指令，并赋予参数，使用镜像对应系统的默认执行方式。")]),s._v(" "),a("li",[s._v("给ENTRYPOINT指令提供参数。")]),s._v(" "),a("li",[s._v("使用shell执行指令，并赋予参数。\n镜像启动时指定的命令。如果指定多个CMD，则只有最后一个生效。\n示例：")])]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/wc"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--help"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"label-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#label-指令"}},[s._v("#")]),s._v(" LABEL 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" <key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("=<value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" <key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("=<value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" <key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("=<value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("给镜像添加描述元数据（metadata）。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"com.example.vendor"')]),s._v("="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ACME Incorporated"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" com.example.label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("with"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("value="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" version="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LABEL")]),s._v(" description="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This text illustrates \\\nthat label-values can span multiple lines."')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("docker inspect")]),s._v(" 命令查看。\n示例：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Labels"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"com.example.vendor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ACME Incorporated"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"com.example.label-with-value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This text illustrates that label-values can span multiple lines."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"multi.label1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"multi.label2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"other"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value3"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"expose-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expose-指令"}},[s._v("#")]),s._v(" EXPOSE 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" <port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("<port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("/<protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("通知镜像运行时应监听的端口和协议。默认是TCP协议。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80/tcp\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 80/udp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("可以使用一下命令在运行镜像时监听端口，TCP和UDP协议是不同的，默认为TCP协议。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[s._v("docker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p 80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("80/tcp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p 80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("80/udp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"env-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env-指令"}},[s._v("#")]),s._v(" ENV 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" <key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" <value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" <key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("=<value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("设置镜像中的环境变量。可以使用反斜杠（\\）来转义空格，或者用双引号。或者也可以直接不写等号，使用多条语句。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myName="),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"John Doe"')]),s._v(" myDog=Rex\\ The\\ Dog \\\n    myCat=fluffy\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myName John Doe\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myDog Rex The Dog\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" myCat fluffy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("docker inspect")]),s._v(" 命令查看，使用"),a("code",[s._v("docker run --env <key>=<value>")]),s._v("在运行镜像时更改环境变量。")]),s._v(" "),a("h2",{attrs:{id:"add-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-指令"}},[s._v("#")]),s._v(" ADD 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=<user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" <src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v(" <dest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=<user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<src>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<dest>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" (this form is required for paths containing whitespace)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("将文件复制到容器中，也可以使用url，并且tar格式压缩的文件添加到容器中时会自动解压。chown参数针对用户进行授权，只对linux系统有效。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" hom* /mydir/        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# adds all files starting with ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hom"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" hom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v(".txt /mydir/    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ? is replaced with any single character, e.g., ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home.txt"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" test relativeDir/          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# adds ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" to `WORKDIR`/relativeDir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" test /absoluteDir/         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# adds ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" to /absoluteDir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".txt /mydir/    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# copy a file named ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"arr[0].txt"')]),s._v(" to /mydir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=55"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("mygroup files* /somedir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=bin files* /somedir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=1 files* /somedir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("11 files* /somedir/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"copy-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copy-指令"}},[s._v("#")]),s._v(" COPY 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=<user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" <src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v(" <dest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=<user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<src>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<dest>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" (this form is required for paths containing whitespace)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("将文件复制到容器中，并且可以复制 "),a("code",[s._v("--from=<name|index>")]),s._v(" 参数来使用FROM AS指令指定的镜像。")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" hom* /mydir/        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# adds all files starting with ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hom"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" hom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v(".txt /mydir/    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ? is replaced with any single character, e.g., ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home.txt"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" test relativeDir/   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# adds ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" to `WORKDIR`/relativeDir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" test /absoluteDir/  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# adds ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" to /absoluteDir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".txt /mydir/    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# copy a file named ")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"arr[0].txt"')]),s._v(" to /mydir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=55"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("mygroup files* /somedir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=bin files* /somedir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=1 files* /somedir/\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("chown=10"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("11 files* /somedir/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"entrypoint-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint-指令"}},[s._v("#")]),s._v(" ENTRYPOINT 指令")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"executable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" (exec form"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" preferred)\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" command param1 param2 (shell form)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("指定在容器运行时执行的命令，CMD 指令可以为其补充参数。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"top"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-b"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("可以在运行时使用 "),a("code",[s._v("--entrypoint")]),s._v(" 覆盖。\n示例：")]),s._v(" "),a("div",{staticClass:"language-DockerFile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[s._v("docker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("entrypoint=top\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ENTRYPOINT 指令 和 CMD 指令的互动。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th"),s._v(" "),a("th",[s._v("No ENTRYPOINT")]),s._v(" "),a("th",[s._v("ENTRYPOINT exec_entry p1_entry")]),s._v(" "),a("th",[s._v("ENTRYPOINT [“exec_entry”, “p1_entry”]")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("No CMD")]),s._v(" "),a("td",[s._v("error, not allowed")]),s._v(" "),a("td",[s._v("/bin/sh -c exec_entry p1_entry")]),s._v(" "),a("td",[s._v("exec_entry p1_entry")])]),s._v(" "),a("tr",[a("td",[s._v("CMD [“exec_cmd”, “p1_cmd”]")]),s._v(" "),a("td",[s._v("exec_cmd p1_cmd")]),s._v(" "),a("td",[s._v("/bin/sh -c exec_entry p1_entry")]),s._v(" "),a("td",[s._v("exec_entry p1_entry exec_cmd p1_cmd")])]),s._v(" "),a("tr",[a("td",[s._v("CMD [“p1_cmd”, “p2_cmd”]")]),s._v(" "),a("td",[s._v("p1_cmd p2_cmd")]),s._v(" "),a("td",[s._v("/bin/sh -c exec_entry p1_entry")]),s._v(" "),a("td",[s._v("exec_entry p1_entry p1_cmd p2_cmd")])]),s._v(" "),a("tr",[a("td",[s._v("CMD exec_cmd p1_cmd")]),s._v(" "),a("td",[s._v("/bin/sh -c exec_cmd p1_cmd")]),s._v(" "),a("td",[s._v("/bin/sh -c exec_entry p1_entry")]),s._v(" "),a("td",[s._v("exec_entry p1_entry /bin/sh -c exec_cmd p1_cmd")])])])]),s._v(" "),a("h2",{attrs:{id:"volume-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#volume-指令"}},[s._v("#")]),s._v(" VOLUME 指令")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("创建具有指定名称的装载点，并将其标记为保存来自本地主机或其他容器的外部安装的卷。即将容器中指定目录，挂载为本机或其他容器的目录，从而使其在运行时不在容器内部进行写操作。运行时可以覆盖这个挂载设置：")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[s._v("docker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v mydata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data xxxx\ndocker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("name test "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("it "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v /home/xqh/myimage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data ubuntu /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"user-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-指令"}},[s._v("#")]),s._v(" USER 指令")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" <user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" or\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" <UID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("<GID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("指定镜像运行时，执行指令的用户。")]),s._v(" "),a("h2",{attrs:{id:"workdir-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workdir-指令"}},[s._v("#")]),s._v(" WORKDIR 指令")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /path/to/workdir\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("设置容器运行时的工作目录，即 RUN、CMD、ENTRYPOINT、ADD 指令执行的目录。")]),s._v(" "),a("h2",{attrs:{id:"arg-指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arg-指令"}},[s._v("#")]),s._v(" ARG 指令")]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ARG")]),s._v(" <name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("=<default value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("定义一个变量，用户可以在构建时使用 "),a("code",[s._v("--build-arg=xxx")]),s._v(" 来覆盖。")])])}),[],!1,null,null,null);t.default=e.exports}}]);